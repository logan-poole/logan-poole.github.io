<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Map â€“ Pinged</title>

  <!-- CSS (Mapbox GL + Geocoder) -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.2/mapbox-gl-geocoder.css"
    rel="stylesheet" />

  <!-- App styles -->
  <link href="./styles/style.css?v=36" rel="stylesheet" />

  <!-- Early: mark embed mode ASAP (same as feed) -->
  <script>
    (function () {
      var qp = new URLSearchParams(location.search);
      if (window.self !== window.top || qp.get('embed') === '1') {
        document.documentElement.classList.add('embed');
      }
    })();
  </script>
</head>

<body>
  <header class="topnav">
    <a href="index.html" class="nav-left" style="text-decoration:none;">
      <img src="assets/logo.png" class="logo small-logo" alt="Pinged Logo" />
      <span class="app-name">Pinged</span>
    </a>
    <nav class="nav-right">
      <a href="dashboard.html">Dashboard</a>
      <a href="feed.html">Feed</a>
      <a class="active" href="map.html">Map</a>
      <button id="theme-toggle" class="theme-toggle" type="button">ðŸŒ“</button>
    </nav>
  </header>

  <main class="content">
    <div id="map" class="map"></div>
    <div id="map-status" class="toast" hidden></div>
  </main>

  <footer>
    <p>&copy; 2025 Pinged. All rights reserved.</p>
  </footer>

  <!-- Load Mapbox libraries BEFORE your app scripts -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.js"></script>
  <script
    src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.2/mapbox-gl-geocoder.min.js"></script>
  <!-- Optional language helper (your code checks for it) -->
  <script src="https://unpkg.com/@mapbox/mapbox-gl-language/dist/mapbox-gl-language.js"></script>

  <!-- Other libs -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- App scripts (order matters: config â†’ ui â†’ map; theme can be anywhere) -->
  <script defer src="./scripts/config.js?v=3"></script>
  <script defer src="./scripts/ui.js?v=10"></script>
  <script defer src="./scripts/map.js?v=31"></script>
  <script defer src="./scripts/theme-toggle.js?v=2"></script>
</body>

</html>