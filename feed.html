<!-- =======================================================================================
FILE: feed.html  (FULL â€” EMBED-AWARE; HIDES NAV/FOOTER WHEN EMBEDDED)
CHANGES
- Early inline helper marks <html> with .is-embed when ?embed=1 or inside an iframe so the
  navbar/footer are hidden immediately (prevents the flicker you saw).
- Everything else is your feed page. The "Your feed" heading remains.
======================================================================================= -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feed â€“ Pinged</title>

  <!-- Mark embed mode ASAP (before CSS/HTML render) -->
  <script>
    (function () {
      var qp = new URLSearchParams(location.search);
      if (window.self !== window.top || qp.get('embed') === '1') {
        document.documentElement.classList.add('is-embed');
      }
    })();
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles/style.css" />
  <link rel="stylesheet" href="styles/embed.css" />
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />

  <!-- Post height to parent (keeps dashboard stage sized to content) -->
  <script src="./scripts/embed-mode.js?v=2" defer></script>
</head>

<body>
  <header class="topnav">
    <a href="index.html" class="nav-left" style="text-decoration:none;">
      <img src="assets/logo.png" class="logo small-logo" alt="Pinged Logo" />
      <span class="app-name">Pinged</span>
    </a>
    <nav class="nav-right">
      <a href="dashboard.html">Dashboard</a>
      <a href="feed.html">Feed</a>
      <a href="map.html">Map</a>
      <button id="themeToggle" class="theme-toggle" type="button">ðŸŒ“</button>
    </nav>
  </header>

  <main class="content">
    <h2>Your feed</h2>

    <!-- Composer -->
    <form id="composer" class="card" style="max-width:680px;">
      <label for="content">Post something</label>
      <textarea id="content" name="content" placeholder="What's up?" required></textarea>
      <button class="primary" type="submit">Post</button>
    </form>

    <!-- Loading / empty / not-signed-in messages are managed by scripts -->
    <div id="feed-empty" class="muted">Loading your feedâ€¦</div>
    <div id="feed-list"></div>
  </main>

  <footer>
    <p>&copy; 2025 Pinged. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script defer src="./scripts/ui.js?v=10"></script>
  <script defer src="./scripts/feed.js?v=6"></script>
  <script defer src="./scripts/theme-toggle.js?v=2"></script>
</body>

</html>